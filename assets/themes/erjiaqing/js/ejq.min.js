function doAtReady(){$(function(){var a="";$("div#post-content h1, div#post-content h2, div#post-content h3, div#post-content h4, div#post-content h5, div#post-content h6").each(function(){a=a+'<li><a href="#'+$(this).attr("id")+'">'+$(this).html()+"</a></li>"}),$("#right-float").html($("#right-float").html()+'<section id="toc"><h4>ToC</h4><ul>'+a+"</ul>"),$("#right-float").stickUp()})}function jumpToNewPage(a){reg=new RegExp("<!--BEGIN_CONTENT-->(.|\\n)*<!--END_CONTENT-->","gm"),$.get(a,function(a){$(".content").html(a.match(reg))}),history.pushState(location.href,null,a),doAtReady()}window.onpopstate=function(a){reg=new RegExp("<!--BEGIN_CONTENT-->(.|\\n)*<!--END_CONTENT-->","gm"),$.get(a.state,function(a){$(".content").html(a.match(reg))})},$("a").click(function(a){return window.history&&history.pushState?(jumpToNewPage(a.toElement.href),!1):!0}),$(document).ready(function(){$("#back-to-top").hide(),$(function(){$(window).scroll(function(){$(window).scrollTop()>200?$("#back-to-top").fadeIn(500):$("#back-to-top").fadeOut(500)}),$("#back-to-top").click(function(){return $("body,html").animate({scrollTop:0},1e3),!1}),$("#back-to-comment").click(function(){return $("body,html").animate({scrollTop:$("#comments").offset().top},1e3),!1}),0==$("#comments").length&&$("#back-to-comment").hide()}),doAtReady()});
